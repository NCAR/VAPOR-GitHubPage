<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DART Manhattan Release Notes &mdash; DART 2.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="DART 2.0.0 documentation" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="dart-manhattan-release-notes">
<h1>DART Manhattan Release Notes<a class="headerlink" href="#dart-manhattan-release-notes" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td><div class="first line-block">
<div class="line">Jump to the <a class="reference external" href="../index.html">DART Documentation
Main Index</a></div>
<div class="line">version information for this file:</div>
<div class="line">$Id:
documentation/html/Manhattan_rele</div>
</div>
<dl class="last docutils">
<dt>ase.html</dt>
<dd>10979 2017-02-01 20:07:34Z
<a class="reference external" href="mailto:thoar&#37;&#52;&#48;ucar&#46;edu">thoar<span>&#64;</span>ucar<span>&#46;</span>edu</a> $</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="#Overview">Dart Overview</a> / <a class="reference external" href="#CurrentUsers">Notes for Current
Users</a> / <a class="reference external" href="#Nonbackward">Non-backwards Compatible
Changes</a> / <a class="reference external" href="#NewFeatures">New Features</a> / <a class="reference external" href="#SupportedModels">Supported
Models</a> / <a class="reference external" href="#ChangedModels">Changed Models</a> /
<a class="reference external" href="#NewFOs">New Forward Operators</a> / <a class="reference external" href="#NewObs">New Observations</a> /
<a class="reference external" href="#NewDiagnostics">New Diagnostics and Documentation</a> / <a class="reference external" href="#NewUtilities">New
Utilities</a> / <a class="reference external" href="#KnownProblems">Known Problems</a> /
<a class="reference external" href="#Legalese">Terms of Use</a></p>
<div class="section" id="dart-overview">
<h2>Dart Overview<a class="headerlink" href="#dart-overview" title="Permalink to this headline">¶</a></h2>
<p>The Data Assimilation Research Testbed (DART) is designed to facilitate
the combination of assimilation algorithms, models, and real (or
synthetic) observations to allow increased understanding of all three.
The DART programs are highly portable, having been compiled with many
Fortran 90 compilers and run on linux compute-servers, linux clusters,
OSX laptops/desktops, SGI Altix clusters, supercomputers running AIX,
and more. Read the
<a class="reference external" href="https://www.image.ucar.edu/DAReS/DART/DART2_Starting.php#customizations">Customizations</a>
section for help in building on new platforms.</p>
<p>DART employs a modular programming approach to apply an Ensemble Kalman
Filter which adjusts model values toward a state that is more consistent
with information from a set of observations. Models may be swapped in
and out, as can different algorithms in the Ensemble Kalman Filter. The
method requires running multiple instances of a model to generate an
ensemble of states. A forward operator appropriate for the type of
observation being assimilated is applied to each of the states to
generate the model&#8217;s estimate of the observation. Comparing these
estimates and their uncertainty to the observation and its uncertainty
ultimately results in the adjustments to the model states. See the
<a class="reference external" href="../DART_LAB/DART_LAB.html">DART_LAB</a> demos or read more <a class="reference external" href="../tutorial/index.html">in the
DART tutorial</a>.</p>
<p>DART diagnostic output can be written that contains the model state
before and after the adjustment, along with the ensemble mean and
standard deviation, and prior or posterior inflation values if inflation
is enabled. There is also a text file, <em>obs_seq.final</em>, with the model
estimates of the observations. There is a suite of MATLAB® functions
that facilitate exploration of the results, but the netCDF files are
inherently portable and contain all the necessary metadata to interpret
the contents with other analysis programs such as NCL, R, etc.</p>
<p>To get started running with Lorenz 63 model refer to <a class="reference external" href="Manhattan_getting_started.html">Getting
Started</a></p>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="notes-for-current-users">
<h2>Notes for Current Users<a class="headerlink" href="#notes-for-current-users" title="Permalink to this headline">¶</a></h2>
<p>If you have been updating from the rma_trunk branch of the DART
subversion repository you will notice that the code tree has been
simplified to be more intuitive for users. The new top level directory
structure looks like :</p>
<ul class="simple">
<li><em>README</em></li>
<li><em>COPYRIGHT</em></li>
<li><em>assimilation_code</em></li>
<li><em>build_templates</em></li>
<li><em>diagnostics</em></li>
<li><em>documentation</em></li>
<li><em>models</em></li>
<li><em>observations</em></li>
</ul>
<p>if you do try to do an &#8216;svn update&#8217; on an existing directory, you will
encounter many &#8216;tree conflicts&#8217;.</p>
<p>We suggest that current users checkout a fresh version of Manhattan in a
new location. To see which files need to be moved, run &#8216;svn status&#8217; on
your original checked out version. Anything with an M or ? in the first
column needs to be moved to the new location in the new tree. Please
<a class="reference external" href="mailto:dart&#37;&#52;&#48;ucar&#46;edu">contact</a> DART if you have any issues migrating
your existing code to the new tree structure.</p>
<p>There is a list of non-backwards compatible changes (<a class="reference external" href="#Nonbackward">see
below</a>), and a list of new options and functions.</p>
<p>The Manhattan release will continue to be updated for the next few
months as we continue to add features. Checking out the Manhattan
release branch and running &#8216;svn update&#8217; from time to time is the
recommended way to update your DART tree.</p>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="non-backwards-compatible-changes">
<h2>Non-backwards Compatible Changes<a class="headerlink" href="#non-backwards-compatible-changes" title="Permalink to this headline">¶</a></h2>
<p>Unlike previous releases of DART, this version contains more
non-backwards compatible changes than usual. Please examine the
following list carefully. We do suggest you check out the Manhattan
release into a new location and migrate any local changes from previous
versions as a second step.</p>
<p>Changes in the Manhattan release (15 May 2015) which are <em>not</em> backwards
compatible with the Lanai release (13 Dec 2013):</p>
<ol class="arabic">
<li><p class="first">We no longer require model data to be converted to DART format
restart files. We directly read and write NetCDF format only. To
specify the input and output files for filter, there are new namelist
items in the &amp;filter_nml namelist: <code class="docutils literal"><span class="pre">'input_state_file_list'</span></code> and
<code class="docutils literal"><span class="pre">'output_state_file_list'</span></code> .</p>
</li>
<li><p class="first">The information formerly in <em>Prior_Diag.nc</em> and <em>Posterior_Diag.nc</em>
has been moved. If you are reading and writing ensemble members from
different files, the state information, the ensemble mean and
standard deviation, and the inflation mean and standard deviation
will all be read and written to separate files:</p>
<ul class="simple">
<li><em>[stage]_member_####.nc</em></li>
<li><em>[stage]_mean.nc</em></li>
<li><em>[stage]_sd.nc</em></li>
<li><em>[stage]_priorinf_{mean,sd}.nc</em> (if prior inflation is turned
on)</li>
<li><em>[stage]_postinf_{mean,sd}.nc</em> (if posterior inflation is turned
on)</li>
</ul>
<p>If you are reading and writing ensemble members from a single file,
all this information will now be in a single NetCDF file but will be
stored in different variables inside that file:</p>
<ul class="simple">
<li><em>[var].nc</em></li>
<li><em>[var]_mean.nc</em></li>
<li><em>[var]_sd.nc</em></li>
<li><em>[var]_priorinf_{mean,sd}.nc</em> (if prior inflation is turned on)</li>
<li><em>[var]_postinf_{mean,sd}.nc</em> (if posterior inflation is turned
on)</li>
</ul>
<p>We also now have options for writing files at four stages of the
assimilation cycle: <code class="docutils literal"><span class="pre">'input',</span> <span class="pre">'preassim',</span> <span class="pre">'postassim',</span> <span class="pre">'output'</span></code>.
This is set in the &amp;filter_nml namelist with stages_to_write.</p>
</li>
<li><p class="first">New model_mod.f90 required routines:</p>
<ul class="simple">
<li><em>vert_convert()</em></li>
<li><em>query_vert_localization_coord()</em></li>
<li><em>pert_model_copies()</em></li>
<li><em>read_model_time()</em></li>
<li><em>write_model_time()</em></li>
</ul>
<p>There are default version of these available to use if you have no
special requirements.</p>
</li>
<li><p class="first">Several of the model_mod.f90 argument lists have changed</p>
<ul class="simple">
<li><em>model_interpolate()</em> now takes in the <code class="docutils literal"><span class="pre">state_handle</span></code> as an
argument rather than a state vector array. It also return an array
of <code class="docutils literal"><span class="pre">expected_obs</span></code> and <code class="docutils literal"><span class="pre">istatus</span></code> for each of the ensemble
members</li>
<li><em>get_state_meta_data()</em> also requires the <code class="docutils literal"><span class="pre">state_handle</span></code> as
an argument rather than a state vector array.</li>
<li><em>nc_write_model_atts()</em> has an additional argument
<code class="docutils literal"><span class="pre">moel_mod_writes_state_variables</span></code>. If true then the model_mod
is expected to write out the state variables, if false DART will
write out the state variable (this is the prefered method for
adding new models, it requires less code from the model developer)</li>
</ul>
</li>
<li><p class="first">There are several namelist changes mainly in the &amp;filter_nml and
&amp;perfect_model_mod which are outlined in detail in
<a class="reference external" href="Manhattan_diffs_from_Lanai.html">Manhattan_diffs_from_Lanai</a></p>
</li>
<li><p class="first">All modules have been moved to <em>DART/assimilation_code/modules/</em>
directory. And similarly all of the programs have moved to
<em>DART/assimilation_code/programs/</em></p>
</li>
<li><p class="first">The location modules which were stored in <em>locations</em> have moved to
<em>DART/assimilation_code/location</em> directory</p>
</li>
<li><p class="first">The observation converters which were stored in <em>observations</em> have
moved to <em>DART/observations/obs_converters</em> directory</p>
</li>
<li><p class="first">The forward operators have moved from
<em>obs_def/obs_def_*_mod.f90</em> to <em>observations/forward_operators</em></p>
</li>
<li><p class="first">The tutorial files have moved to <em>DART/documentation/tutorial
directory</em></p>
</li>
<li><p class="first">The program <em>fill_inflation_restart</em> is OBSOLETE since DART
inflation files are now in NetCDF format. Now inflation files can be
filled using <em>ncap2</em>. Here is an example using version 4.4.2 or later
of the NCO tools:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ncap2</span> <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;T=1.0;U=1.0;V=1.0&quot;</span> <span class="n">wrfinput_d01</span> <span class="n">prior_inf</span><span class="o">.</span><span class="n">nc</span><span class="s1">&#39;</span>
<span class="n">ncap2</span> <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;T=0.6;U=0.6;V=0.6&quot;</span> <span class="n">wrfinput_d01</span> <span class="n">prior_sd</span><span class="o">.</span><span class="n">nc</span><span class="s1">&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">The default flags in the mkmf_template.XXX files have been updated
to be more consistent with current compiler versions.</p>
</li>
<li><p class="first">If you enable the sampling error correction option, the required data
is now read from a single netcdf file which supports multiple
ensemble sizes. A program is provided to compute additional ensemble
sizes if they are not in the default file.</p>
</li>
<li><p class="first">Our use of TYPES and KINDS has been very confusing in the past. In
Manhattan we have tried to make it clearer which things in DART are
generic quantities (QTY) - temperature, pressure, etc - and which
things are specific types of observations - Radiosonde_temperature,
Argo_salinity etc.</p>
<p>Below is a mapping between old and new subroutine names here for
reference. We have made these changes to all files distributed with
DART. If you have lots of code developed outside of the subversion
repository, please contact <a class="reference external" href="mailto:dart&#37;&#52;&#48;ucar&#46;edu">DART</a> for a sed
script to help automate the changes.</p>
<p>Public subroutines, existing name on left, replacement on right:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">assimilate_this_obs_kind</span><span class="p">()</span>     <span class="o">=&gt;</span>     <span class="n">assimilate_this_type_of_obs</span><span class="p">(</span><span class="n">type_index</span><span class="p">)</span>
<span class="n">evaluate_this_obs_kind</span><span class="p">()</span>       <span class="o">=&gt;</span>       <span class="n">evaluate_this_type_of_obs</span><span class="p">(</span><span class="n">type_index</span><span class="p">)</span>
<span class="n">use_ext_prior_this_obs_kind</span><span class="p">()</span>  <span class="o">=&gt;</span>  <span class="n">use_ext_prior_this_type_of_obs</span><span class="p">(</span><span class="n">type_index</span><span class="p">)</span>

<span class="n">get_num_obs_kinds</span><span class="p">()</span>            <span class="o">=&gt;</span>  <span class="n">get_num_types_of_obs</span><span class="p">()</span>
<span class="n">get_num_raw_obs_kinds</span><span class="p">()</span>        <span class="o">=&gt;</span>  <span class="n">get_num_quantities</span><span class="p">()</span>

<span class="n">get_obs_kind_index</span><span class="p">()</span>           <span class="o">=&gt;</span> <span class="n">get_index_for_type_of_obs</span><span class="p">(</span><span class="n">type_name</span><span class="p">)</span>
<span class="n">get_obs_kind_name</span><span class="p">()</span>            <span class="o">=&gt;</span> <span class="n">get_name_for_type_of_obs</span><span class="p">(</span><span class="n">type_index</span><span class="p">)</span>

<span class="n">get_raw_obs_kind_index</span><span class="p">()</span>       <span class="o">=&gt;</span>  <span class="n">get_index_for_quantity</span><span class="p">(</span><span class="n">qty_name</span><span class="p">)</span>
<span class="n">get_raw_obs_kind_name</span><span class="p">()</span>        <span class="o">=&gt;</span>  <span class="n">get_name_for_quantity</span><span class="p">(</span><span class="n">qty_index</span><span class="p">)</span>

<span class="n">get_obs_kind_var_type</span><span class="p">()</span>        <span class="o">=&gt;</span>  <span class="n">get_quantity_for_type_of_obs</span><span class="p">(</span><span class="n">type_index</span><span class="p">)</span>

<span class="n">get_obs_kind</span><span class="p">()</span>                 <span class="o">=&gt;</span>  <span class="n">get_obs_def_type_of_obs</span><span class="p">(</span><span class="n">obs_def</span><span class="p">)</span>
<span class="n">set_obs_def_kind</span><span class="p">()</span>             <span class="o">=&gt;</span>  <span class="n">set_obs_def_type_of_obs</span><span class="p">(</span><span class="n">obs_def</span><span class="p">)</span>

<span class="n">get_kind_from_menu</span><span class="p">()</span>           <span class="o">=&gt;</span>  <span class="n">get_type_of_obs_from_menu</span><span class="p">()</span>

<span class="n">read_obs_kind</span><span class="p">()</span>                <span class="o">=&gt;</span>   <span class="n">read_type_of_obs_table</span><span class="p">(</span><span class="n">file_unit</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>
<span class="n">write_obs_kind</span><span class="p">()</span>               <span class="o">=&gt;</span>  <span class="n">write_type_of_obs_table</span><span class="p">(</span><span class="n">file_unit</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>

<span class="n">maps</span> <span class="n">obs_seq</span> <span class="n">nums</span> <span class="n">to</span> <span class="n">specific</span> <span class="nb">type</span> <span class="n">nums</span><span class="p">,</span> <span class="n">only</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">read_obs_seq</span><span class="p">:</span>
<span class="n">map_def_index</span><span class="p">()</span>                <span class="o">=&gt;</span> <span class="n">map_type_of_obs_table</span><span class="p">()</span>

<span class="n">removed</span> <span class="n">this</span><span class="o">.</span>  <span class="n">apparently</span> <span class="n">unused</span><span class="p">,</span> <span class="ow">and</span> <span class="n">simply</span> <span class="n">calls</span> <span class="n">get_obs_kind_name</span><span class="p">():</span>
<span class="n">get_obs_name</span><span class="p">()</span>

<span class="n">apparently</span> <span class="n">unused</span> <span class="n">anywhere</span><span class="p">,</span> <span class="n">removed</span><span class="p">:</span>
<span class="n">add_wind_names</span><span class="p">()</span>
<span class="n">do_obs_form_pair</span><span class="p">()</span>
</pre></div>
</div>
<p>Public integer parameter constants and subroutine formal argument
names, old on left, new on right:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">KIND_</span> <span class="o">=&gt;</span> <span class="n">QTY_</span>
<span class="n">kind</span>  <span class="o">=&gt;</span> <span class="n">quantity</span>

<span class="n">TYPE_</span> <span class="o">=&gt;</span> <span class="n">TYPE_</span>
<span class="nb">type</span>  <span class="o">=&gt;</span> <span class="n">type_of_obs</span>

<span class="n">integer</span> <span class="n">parameters</span><span class="p">:</span>
<span class="n">max_obs_generic</span>  <span class="o">=&gt;</span>  <span class="n">max_defined_quantities</span>  <span class="p">(</span><span class="ow">not</span> <span class="n">currently</span> <span class="n">public</span><span class="p">,</span> <span class="n">stays</span> <span class="n">private</span><span class="p">)</span>
<span class="n">max_obs_kinds</span>    <span class="o">=&gt;</span>  <span class="n">max_defined_types_of_obs</span>
</pre></div>
</div>
</li>
<li><p class="first">For smaller models we support single file input and output. These
files contain all of the member information, mean, standard deviation
and inflation values for all of the state variables. This can be run
with cycling and all time steps will be appended to the file.</p>
<p>For <em>perfect_model_obs</em> we provide a <em>perfect_input.cdl</em> file
which contains a single ensemble member which will be considered the
&#8216;truth&#8217; and observations will be generated based on those values. The
output will contain all of the cycling timesteps all of the state
variables.</p>
<p>For <em>filter</em> we provide a <em>filter_input.cdl</em> file which contains all
of the state member variables and potentially inflation mean and
standard deviation values. The output will contain all of the cycling
timesteps all of the state variables. Additionally you have the
option to write out different stages during the assimilation in the
&amp;filter_nml <code class="docutils literal"><span class="pre">stages_to_write</span></code> mentioned above.</p>
<p>To generate a NetCDF file from a .cdl file run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ncgen</span> <span class="o">-</span><span class="n">o</span> <span class="n">perfect_input</span><span class="o">.</span><span class="n">nc</span> <span class="n">perfect_input</span><span class="o">.</span><span class="n">cdl</span>
<span class="n">ncgen</span> <span class="o">-</span><span class="n">o</span> <span class="n">filter_input</span><span class="o">.</span><span class="n">nc</span> <span class="n">filter_input</span><span class="o">.</span><span class="n">cdl</span>
</pre></div>
</div>
</li>
</ol>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>DART now reads and writes NetCDF files for the model state
information. If your model uses NetCDF file format, you no longer
need model_to_dart or dart_to_model to translate to a DART format
file. If your model does not use NetCDF, you can adapt your
model_to_dart and dart_to_model executables to read and write a
NetCDF file for DART to use.
The read/write code is part of the core DART routines so no code is
needed in the model_mod model-specific module. There is a new
routine <a class="reference external" href="state_structure.html">add_domain()</a> that a
model_mod::static_init_model() can user to define which NetCDF
variables should be part of the model state, and what DART quantity
(formerly kind) they correspond to.</li>
<li>DART no longer limits the size of a model state to the size of a
single MPI task&#8217;s memory. The state is read in variable by variable
and distributed across all MPI tasks, so the memory use is much
smaller than previous versions of DART. One-sided MPI communication
is used during the computation of forward operator values to get
required parts of the state from other tasks.</li>
<li>Many of the DART namelists have been simplified, and some items have
moved to a more specific namelist.</li>
<li>Observation sequence files can include externally computed forward
operator values which can be used in the assimilation instead of
calling a forward operator inside DART.</li>
<li>The DART directory structure has been reorganized to make it easier
to identify the various software tools, modules, documentation and
tutorials supplied with the system.</li>
<li>The MATLAB® diagnostic routines have been updated to not require the
MEXNC toolbox. These routines use the built-in NetCDF support that
comes with MATLAB®.</li>
<li>There is a new Particle Filter type. Please contact us if you are
interested in using it.</li>
<li>DART can now take subsets of observation types and restrict them from
impacting certain quantities in the state during the assimilation. A
tool to simplify constructing the table of interactions is provided
(obs_impact_tool).</li>
<li>State Structure<ul>
<li>Contains information about dimensions and size of variables in
your state. There is a number of accessor functions to get
variable information such as <code class="docutils literal"><span class="pre">get_variable_size()</span></code>. See the
<a class="reference external" href="state_structure.html">state_structure.html</a> for more details.</li>
</ul>
</li>
<li>The POP model_mod now can interpolate Sea Surface Anomaly
observations.</li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="supported-models">
<h2>Supported Models<a class="headerlink" href="#supported-models" title="Permalink to this headline">¶</a></h2>
<p>Currently we support the models listed below. There are several new
models that have been added that are not on the Lanai Release including
CM1, CICE, and ROMS. Any previously supported models not on this list
are still supported in DART
<a class="reference external" href="http://www.image.ucar.edu/DAReS/DART/classic/index.html">classic</a></p>
<ul class="simple">
<li><strong>9var</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/9var/model_mod.html">9var</a> model.</li>
</ul>
</li>
<li><strong>bgrid_solo</strong><ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/bgrid_solo/model_mod.html">bgrid
solo</a> model.</li>
</ul>
</li>
<li><strong>cam-fv</strong><ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/cam-fv/model_mod.html">CAM finite
volume</a> global atmospheric
model.</li>
<li>Documentation for the <a class="reference external" href="http://www.cesm.ucar.edu/models/atm-cam/">CAM
model</a>.</li>
</ul>
</li>
<li><strong>cice (NEW)</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/cice/model_mod.html">CICE</a> model.</li>
<li>Documentation for the <a class="reference external" href="http://www.cesm.ucar.edu/models/ccsm4.0/cice/">CICE
model</a>.</li>
</ul>
</li>
<li><strong>cm1 (NEW)</strong><ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/cm1/model_mod.html">CM1 cloud-resolving
model</a>.</li>
<li>Documentation for the <a class="reference external" href="http://www2.mmm.ucar.edu/people/bryan/cm1/">CM1
model</a>.</li>
</ul>
</li>
<li><strong>forced_lorenz_96</strong><ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/forced_lorenz_96/model_mod.html">forced
lorenz_96</a>
model.</li>
</ul>
</li>
<li><strong>lorenz_63</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/lorenz_63/model_mod.html">lorenz_96</a> model.</li>
</ul>
</li>
<li><strong>lorenz_84</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/lorenz_84/model_mod.html">lorenz_84</a> model.</li>
</ul>
</li>
<li><strong>lorenz_96</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/lorenz_96/model_mod.html">lorenz_96</a> model.</li>
</ul>
</li>
<li><strong>lorenz_04</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/lorenz_04/model_mod.html">lorenz_04</a> model.</li>
</ul>
</li>
<li><strong>mpas_atm</strong> (NetCDF overwrite not supported for
update_u_from_reconstruct = .true. )<ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/mpas_atm/model_mod.html">MPAS
atmosphere</a> model.</li>
<li>Documentation for the <a class="reference external" href="https://mpas-dev.github.io/atmosphere/atmosphere.html">MPAS
model</a>.</li>
</ul>
</li>
<li><strong>POP</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/POP/model_mod.html">POP</a> global ocean model.</li>
<li>Documentation for the <a class="reference external" href="http://www.cesm.ucar.edu/models/ccsm2.0/pop/">POP
model</a>.</li>
</ul>
</li>
<li><strong>ROMS (NEW)</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/ROMS/model_mod.html">ROMS</a> regional ocean model.</li>
<li>Documentation for the <a class="reference external" href="https://www.myroms.org/">ROMS model</a>.</li>
</ul>
</li>
<li><strong>simple_advection</strong><ul>
<li>DART interface documentation for the <a class="reference external" href="../../models/simple_advection/model_mod.html">simple
advection</a> model.</li>
</ul>
</li>
<li><strong>wrf</strong><ul>
<li>DART interface documentation for the
<a class="reference external" href="../../models/wrf/model_mod.html">WRF</a> regional forecast model.</li>
<li>Documentation for the <a class="reference external" href="http://www.wrf-model.org/index.php">WRF
model</a>.</li>
</ul>
</li>
</ul>
<p>The <em>DART/models/template</em> directory contains sample files for adding a
new model. See the <a class="reference external" href="http://www.image.ucar.edu/DAReS/DART/DART2_Documentation.php#adding_a_model">Adding a
Model</a>
section of the DART web pages for more help on adding a new model.</p>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="changed-models">
<h2>Changed Models<a class="headerlink" href="#changed-models" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>WRF<ul>
<li>Allow advanced microphysics schemes (needed interpolation for 7
new kinds)</li>
<li>Interpolation in the vertical is now done in log(p) instead of
linear pressure space. log(p) is the default, but a compile-time
variable can restore the linear interpolation.</li>
<li>Added support in the namelist to avoid writing updated fields back
into the wrf netcdf files. The fields are still updated during the
assimilation but the updated data is not written back to the
wrfinput file during the dart_to_wrf step.</li>
<li>Fixed an obscure bug in the vertical convert routine of the wrf
model_mod that would occasionally fail to convert an obs. This
would make tiny differences in the output as the number of mpi
tasks change. No quantitative differences in the results but they
were not bitwise compatible before and they are again now.</li>
</ul>
</li>
<li>CAM<ul>
<li>DART/CAM now runs under the CESM framework, so all options
available with the framework can be used.</li>
<li>Support for the SE core (HOMME) has been developed but is NOT part
of this release. Please contact the <a class="reference external" href="mailto:dart&#37;&#52;&#48;ucar&#46;edu">DART Development
Group</a> if you have an interest in this
configuration of CAM.</li>
</ul>
</li>
<li>Simple Advection Model<ul>
<li>Fixed a bug where the random number generator was being used
before being called with an initial seed.</li>
</ul>
</li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="new-observation-types-forward-operators">
<h2>New Observation Types/Forward Operators<a class="headerlink" href="#new-observation-types-forward-operators" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Many new observation types related to land and atmospheric chemistry
have been added. See the
<a class="reference external" href="../../assimilation_code/modules/observations/DEFAULT_obs_kind_mod.F90">obs_kind_mod.f90</a>
for a list of the generic quantities now available.</li>
<li>New forward operator for Sea Ice (cice) ice thickness observations.
See the
<a class="reference external" href="../../observations/forward_operators/obs_def_cice_mod.f90">obs_def_cice_mod.f90</a>
file for details.</li>
<li>New forward operator for Carbon Monoxide (CO) Nadir observations. See
the
<a class="reference external" href="../../observations/forward_operators/obs_def_CO_Nadir_mod.f90">obs_def_CO_Nadir_mod.f90</a>
file for details.</li>
<li>New forward operator for Total Cloud Water in a column observations.
See the
<a class="reference external" href="../../observations/forward_operators/obs_def_cwp_mod.f90">obs_def_cwp_mod.f90</a>
file for details.</li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="new-observation-types-sources">
<h2>New Observation Types/Sources<a class="headerlink" href="#new-observation-types-sources" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>AVISO
Added an observation converter for Sea Surface Height Anomaly
observations. Documentation in
<a class="reference external" href="../../observations/obs_converters/AVISO/convert_aviso.f90">convert_aviso.f90</a>
(source).</li>
<li>cice
Added an obs_sequence converter for Sea Ice observations.
Documentation in
<a class="reference external" href="../../observations/obs_converters/cice/cice_to_obs.html">cice_to_obs.html</a>.</li>
<li>GPSPW
Added an obs_sequence converter for GPS precipitable water
observations. Documentation in
<a class="reference external" href="../../observations/obs_converters/GPSPW/convert_gpspw.f90">convert_gpspw.f90</a>
(source).</li>
<li>MODIS
Added an obs_sequence converter for MODIS FPAR (Fraction of
Photosynthetically Active Radiation) and LAI (Leaf Area Index)
obseverations. Documentation in
<a class="reference external" href="../../observations/obs_converters/MODIS/MOD15A2_to_obs.html">MOD15A2_to_obs.html</a>.</li>
<li>ok_mesonet
Added an obs_sequence converter for the Oklahoma Mesonet
observations. Documentation in
<a class="reference external" href="../../observations/obs_converters/ok_mesonet/ok_mesonet.html">ok_mesonet.html</a>.</li>
<li>ROMS
Added an obs_sequence converter for ROMS ocean data. This converter
includes externally computed forward operators output from the ROMS
model using FGAT (First Guess At Time) during the model run.
Documentation in
<a class="reference external" href="../../observations/obs_converters/ROMS/convert_roms_obs.f90">convert_roms_obs.f90</a>
(source).</li>
<li>SSUSI
Added an obs_sequence converter for wind profiler observations.
Documentation in
<a class="reference external" href="../../observations/obs_converters/SSUSI/convert_f16_edr_dsk.html">convert_f16_edr_dsk.html</a>.</li>
<li>tropical_cyclone
Added an obs_sequence converter for ASCII format tropical cyclone
track observations. Documentation in
<a class="reference external" href="../../observations/obs_converters/tropical_cyclone/tc_to_obs.html">tc_to_obs.html</a>.</li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="new-diagnostics-and-documentation">
<h2>New Diagnostics and Documentation<a class="headerlink" href="#new-diagnostics-and-documentation" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>Better Web Pages.</strong> We&#8217;ve put a lot of effort into expanding our
documentation. For example, please check out <a class="reference external" href="http://www.image.ucar.edu/DAReS/DART/DART2_Diagnostics.php#mat_obs">the MATLAB diagnostics
section</a>
or the pages outlining the <a class="reference external" href="http://www.image.ucar.edu/DAReS/DART/DART2_Observations.php#obs_seq_overview">observation sequence file
contents</a>.</div>
</div>
<ul class="simple">
<li>The MATLAB® diagnostic routines have been updated to remove the
dependency on third-party toolboxes. These routines use the built-in
netCDF support that comes with basic MATLAB® (no other toolboxes
needed).</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">But there&#8217;s always more to add. <strong>Please `let us
know &lt;http://www2.cisl.ucar.edu/image/software/dart/suggestion-box&gt;`__
where we are lacking.</strong></div>
</div>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="new-utilities">
<h2>New Utilities<a class="headerlink" href="#new-utilities" title="Permalink to this headline">¶</a></h2>
<p>This section describes updates and changes to the tutorial materials,
scripting, setup, and build information since the Lanai release.</p>
<ul class="simple">
<li><em>obs_impact_tool</em> please refer to
<a class="reference external" href="https://www.image.ucar.edu/DAReS/DART/Manhattan/assimilation_code/programs/obs_impact_tool/obs_impact_tool.html">Website</a>
or <a class="reference external" href="../../assimilation_code/programs/obs_impact_tool/obs_impact_tool.html">local
file</a></li>
<li><em>gen_sampling_error_table</em> now computes sampling error correction
tables for any ensemble size.</li>
<li><em>compute_error</em>
<a class="reference external" href="https://www.image.ucar.edu/DAReS/DART/Manhattan/assimilation_code/programs/compute_error/compute_error.html">Website</a>
or <a class="reference external" href="../../assimilation_code/programs/compute_error/compute_error.html">local
file</a></li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="known-problems">
<h2>Known Problems<a class="headerlink" href="#known-problems" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>There are many changes in this release and more updates are expected
to come soon. We are not aware of any obvious bugs, but if you
encounter any unexpected behavior please contact us. Please watch the
dart-users email list for announcements of updates to the release
code, and be prepared to do an &#8216;svn update&#8217; from time to time to get
updated files.</li>
</ul>
<div class="top"><p>[<a class="reference external" href="#">top</a>]</p>
</div></div>
<hr class="docutils" />
<div class="section" id="terms-of-use">
<h2>Terms of Use<a class="headerlink" href="#terms-of-use" title="Permalink to this headline">¶</a></h2>
<p>DART software - Copyright UCAR. This open source software is provided by
UCAR, &#8220;as is&#8221;, without charge, subject to all terms of use at
<a class="reference external" href="http://www.image.ucar.edu/DAReS/DART/DART_download">http://www.image.ucar.edu/DAReS/DART/DART_download</a></p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Contact:</td>
<td>DART core group</td>
</tr>
<tr class="row-even"><td>Revision:</td>
<td>$Revision: 10979 $</td>
</tr>
<tr class="row-odd"><td>Source:</td>
<td>$URL: <a class="reference external" href="https://www.image.ucar.edu/DAReS/DART/Manhattan/documentation/html/Manhattan_release.html">https://www.image.ucar.edu/DAReS/DART/Manhattan/documentation/html/Manhattan_release.html</a> $</td>
</tr>
<tr class="row-even"><td>Change Date:</td>
<td>$Date: 2017-02-01 13:07:34 -0700 (Wed, 01 Feb 2017) $</td>
</tr>
<tr class="row-odd"><td>Change&nbsp;history:</td>
<td>try &#8220;svn&nbsp;log&#8221; or &#8220;svn&nbsp;diff&#8221;</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">DART Manhattan Release Notes</a><ul>
<li><a class="reference internal" href="#dart-overview">Dart Overview</a></li>
<li><a class="reference internal" href="#notes-for-current-users">Notes for Current Users</a></li>
<li><a class="reference internal" href="#non-backwards-compatible-changes">Non-backwards Compatible Changes</a></li>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#supported-models">Supported Models</a></li>
<li><a class="reference internal" href="#changed-models">Changed Models</a></li>
<li><a class="reference internal" href="#new-observation-types-forward-operators">New Observation Types/Forward Operators</a></li>
<li><a class="reference internal" href="#new-observation-types-sources">New Observation Types/Sources</a></li>
<li><a class="reference internal" href="#new-diagnostics-and-documentation">New Diagnostics and Documentation</a></li>
<li><a class="reference internal" href="#new-utilities">New Utilities</a></li>
<li><a class="reference internal" href="#known-problems">Known Problems</a></li>
<li><a class="reference internal" href="#terms-of-use">Terms of Use</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/docs/Manhattan_release.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, DART Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/docs/Manhattan_release.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>